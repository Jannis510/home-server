server:
  verbosity: 1
  use-syslog: no
  logfile: ""
  interface: 0.0.0.0
  port: 5335

  # IPv4-only operation (Docker internal resolver)
  do-ip4: yes
  do-udp: yes
  do-tcp: yes
  do-ip6: no

  # Allow queries from Docker networks only.
  # Access is restricted at network level (dns_net).
  access-control: 0.0.0.0/0 allow

  # DNSSEC configuration
  auto-trust-anchor-file: "/opt/unbound/etc/unbound/var/root.key"

  # Recursive resolver (no upstream forwarders)
  # This instance performs full recursive resolution.
  # No forward-zone blocks are configured.

  # Hardening options
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-referral-path: yes
  use-caps-for-id: yes
  qname-minimisation: yes
  # EDNS tuning for compatibility (e.g., avoids fragmentation issues)
  edns-buffer-size: 1232
  # Cache behavior
  rrset-roundrobin: yes
  cache-min-ttl: 300
  cache-max-ttl: 86400
  prefetch: yes
  prefetch-key: yes